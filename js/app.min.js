function loadScript(){var a=document.createElement("script");a.type="text/javascript",a.src="https://maps.googleapis.com/maps/api/js?libraries=geometry&key=AIzaSyC0TkfOlixEJ_CtnCSIu3eVnt5yUXJuuGE&v=3&callback=initMap",onerror="googleError()",document.body.appendChild(a)}function googleError(){console.log("error loading map"),alert("Sorry, but we are unable to load the map at the moment, please try again later")}function openNav(){var a=document.getElementById("mySidenav");$(window).width()>1200?a.style.width="30%":$(window).width()>922?a.style.width="36%":$(window).width()>768?a.style.width="42%":$(window).width()>420?a.style.width="66%":a.style.width="90%";var b=$(".map-parent").height();a.style.height=b-20+"px"}function closeNav(){document.getElementById("mySidenav").style.width="0"}function requestFourSquare(a){var d,b=a.lat+","+a.lng,c="https://api.foursquare.com/v2/venues/search";$.ajax({url:c,dataType:"json",data:{limit:"1",ll:b,client_id:CLIENT_ID,client_secret:CLIENT_SECRET,v:VERSION,async:!0},success:function(a){d=a.response.venues[0].id,getPhotos(d)}}).fail(function(a){alert("Sorry, but we are unable to retrieve photos right now"),console.log(a)})}function getPhotos(a){$(".item").remove(),flag=!0;var b,c,d;$.ajax({url:"https://api.foursquare.com/v2/venues/"+a+"/photos",dataType:"json",data:{client_id:CLIENT_ID,client_secret:CLIENT_SECRET,v:VERSION,async:!0},success:function(a){b=a.response.photos.count;for(var e=0;e<b;e++)c=a.response.photos.items[e],d=c.prefix+"height100"+c.suffix,appendPhotos(d)}}).fail(function(a){console.log(a),alert("Sorry, but we are unable to retrieve photos right now")})}function appendPhotos(a){var b,c=a.replace("height100","height300");flag?(b='<div class="item active"><div class="row"><div class="col-sm-12"><a href="'+c+'" class="thumbnail"><img src="'+a+'" height="100px" alt="Image" class="img-responsive"></a></div></div></div>',flag=!1):b='<div class="item"><div class="row"><div class="col-sm-12"><a href="'+c+'" class="thumbnail"><img src="'+a+'" alt="Image" class="img-responsive"></a></div></div></div>',$(b).insertBefore(".insert-photos")}function initMap(){function k(a,b){function g(c,d){if(d==google.maps.StreetViewStatus.OK){e=c.location.latLng,f=google.maps.geometry.spherical.computeHeading(e,a.position),b.setContent('<div class="marker">'+a.title+'<div id="pano"></div></div>');var g={position:e,pov:{heading:f,pitch:20}};new google.maps.StreetViewPanorama(document.getElementById("pano"),g)}else b.setContent('<div class="marker">'+a.title+"<br>No Street View Found</div>")}if($("#title").text(model.restaurants[a.id].name),$("#website").attr("href",model.restaurants[a.id].url),$("#website").text("Check Out the Website"),$("#address").text(model.restaurants[a.id].street),$("#comments").text(model.restaurants[a.id].comments),requestFourSquare(model.restaurants[a.id].location),b.marker!=a){b.setContent(""),b.marker=a,b.addListener("closeclick",function(){b.marker=null,$(".item").empty()});(new google.maps.StreetViewService).getPanoramaByLocation(a.position,30,g);var e,f;b.open(map,a)}}var a=[{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"},{lightness:17}]}];map=new google.maps.Map(document.getElementById("map"),{center:{lat:39.2904,lng:-76.6122},zoom:13,styles:a,mapTypeControl:!1});for(var b=new google.maps.InfoWindow,c=new google.maps.LatLngBounds,d=0;d<model.restaurants.length;d++){var f=(model.restaurants[d].url,model.restaurants[d].location),g=model.restaurants[d].name,j=(model.restaurants[d].street,model.restaurants[d].city,new google.maps.Marker({position:f,title:g,icon:{url:"img/pin-sm.png"},animation:google.maps.Animation.DROP,id:d}));c.extend(j.position),markersArray.push(j),j.addListener("click",function(){toggleBounce(this),k(this,b)})}toggleMarkers()}function toggleMarkers(){if(showMarkers){for(var a=new google.maps.LatLngBounds,b=0;b<markersArray.length;b++)markersArray[b].setMap(map),markersArray[b].setAnimation(google.maps.Animation.DROP),a.extend(markersArray[b].position);map.fitBounds(a),document.getElementById("btnIcon").className="glyphicon glyphicon-remove",document.getElementById("toggleBtn").title="Hide Markers",showMarkers=!1}else{for(var c=0;c<markersArray.length;c++)markersArray[c].setMap(null);document.getElementById("btnIcon").className="glyphicon glyphicon-ok",document.getElementById("toggleBtn").title="Show Markers",showMarkers=!0}}function toggleBounce(a){null!==a.getAnimation()?a.setAnimation(null):a.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){a.setAnimation(null)},2100)}var map,markersArray=[],showMarkers=!0,flag,CLIENT_ID="3IVGPORHDKYSW3UJUI4RXOZASB3Y3ESIDZT4HH4TV3GJ5SPO",CLIENT_SECRET="4QCTDJU0DCNE0NF032RKU54WVCG0HHWFUSLBFLE3AKOKLA4U",VERSION="20170401";window.onload=loadScript,$(document).ready(function(){$("#myCarousel").carousel({interval:1e4}),$("#myCarousel").on("slid.bs.carousel",function(){})});var model={currentRestaurant:null,restaurants:[{name:"Lee's Pint & Shell",street:"2844 Hudson St",city:"Baltimore, MD",type:["Pub","Bar","Seafood"],comments:"This place is great for a fun night out. It's pretty loud, but the patio is a quiet alternative. They have outside heaters too! My favrorite drink is the Frontier-YUM. I would recommend the duck nachos, or any of their fries!",url:"http://www.leespintandshell.com",location:{lat:39.282347,lng:-76.575689},index:0},{name:"Sip & Bite",street:"2200 Boston St",city:"Baltimore, MD",type:["Breakfast","American","Greek","Diner","Mediterranean"],comments:"I LOVE the Greek food here. It's hard for me to try anything else on the menu since I always default to the lamb! Although I heard their breakfast burrito is fantastic as well. The service is always great, and it's open 24/7 so hey - why not?",url:"http://www.sipandbite.com",location:{lat:39.283959,lng:-76.585578},index:1},{name:"Fork & Wrench",street:"2322 Boston St",city:"Baltimore, MD",type:["New American","Fine Dining","Cocktails"],comments:"This is my go to place for a great meal. Although, be prepared to pay up, it's not cheap. But well worth it! I recommend the beef cheek or lamb (if they have it on the menu). The menu changes seasonally so go every now and then to change it up, or if you don't like what you see, wait 3 months and it'll be new again.",url:"http://www.theforkandwrench.com",location:{lat:39.282901,lng:-76.583881},index:2},{name:"Dangerously Delicious",street:"2839 O'Donnell St",city:"Baltimore, MD",type:["Bakery","Dessert"],comments:"I think the name says it all. They have both sweet and savory pies. If you go on their date night you can get 1 of each plus a drink for a great price. The Baltimore Bomb is a classic, especially if you are new to Bmore.",url:"http://www.dangerouspiesbalt.com",location:{lat:39.279923,lng:-76.575537},index:3},{name:"DiPasquales",street:"3700 Gough St",city:"Baltimore, MD",type:["Italian","Deli"],comments:"This is an old Italian market and deli, you can order it to go, or swing by and pick it up, or grab some Italian groceries from there. I recommend the lamborgini sandwich or the meatball sub. I'm sure the pasta is great as well!",url:"http://www.dipasquales.com",location:{lat:39.288904,lng:-76.566489},index:4},{name:"The Boathouse Canton",street:"2809 Boston St",city:"Baltimore, MD",type:["New American","Seafood","Contemporary"],comments:"The view at the Boathouse is beautiful, just over looking the water. It's great for large groups and has a little bit of everything on the menu",url:"http://www.boathousecanton.com",location:{lat:39.276836,lng:-76.576378},index:5},{name:"Cask & Grain",street:"2823 O'Donnell St",city:"Baltimore, MD",type:["New American","Cocktails","Fine Dining"],comments:"I have only been once, but I'm sure I'll go back. This little restaurant opened up in January of 2017 and has been a hit in Canton. The atmosphere is a bit more up-scale than the other places around. The food is all good, from the appies to the desserts!",url:"http://caskandgrainkitchen.com",location:{lat:39.279865,lng:-76.575957},index:6},{name:"Ra Sushi",street:"1390 Lancaster St",city:"Baltimore, MD",type:["Sushi","Asian"],comments:"Living in Vancouver I have yet to find any sushi place that can come close and compare to the sushi we have there. However, this one wasn't bad. Probably my favorite place in Bmore to go for sushi (thus far...)",url:"http://www.rasushi.com",location:{lat:39.282465,lng:-76.597435},index:7},{name:"Ekiben",street:"1622 Eastern Ave",city:"Baltimore, MD",type:["Asian"],comments:"It's hard to explain the wonderfullness that is Ekiben. It's a great concenpt... asain inspired, yet with an American twist. Can you say steamed buns? Yes please!",url:"http://www.ekibenbaltimore.com",location:{lat:39.285737,lng:-76.594554},index:8},{name:"Southern Provisions",street:"3000 O'Donnell S",city:"Baltimore, MD",type:["Southern","Bar","Pub"],comments:"This is a great, open concept restaurant. In the summer the windows all roll up and it's like eating inside but outdoors. They have an assortment of southern styled food, but I recommend the beef braised briskette! Comes with delicious corn bread on the side.",url:"http://www.southern-provisions.com",location:{lat:39.28056,lng:-76.573867},index:9},{name:"Verde",street:"641 S Montford Ave",city:"Baltimore, MD",type:["Italian","Pizza"],comments:"I love the pizza here so much that I decided to host my wedding reception here. Nuff said.",url:"http://www.verdepizza.com",location:{lat:39.284113,lng:-76.582571},index:10},{name:"HomeSlyce Canton",street:"900 S Kenwood Ave",city:"Baltimore, MD",type:["Pizza","Bar","Pub"],comments:"The best thing about HomeSlyce (well, there's a lot) but I gotta say it's the fact that they don't hold out on the cheese. I mean like LOADS of cheese, and they have awesome deals every day of the week - hooray!",url:"http://www.homeslyce.com",location:{lat:39.282,lng:-76.577158},index:11},{name:"Smaltimore",street:"2522 Fait Ave",city:"Baltimore, MD",type:["Bar","Pub"],comments:"The burgers are great, and so is the beer, what else do you need? Be careful, if you go when the NYG are playing you probably wont be able to squeeze yourself in there.",url:"http://www.smaltimorebaltimore.com",location:{lat:39.283255,lng:-76.58041},index:12},{name:"Hudson Street Stack house",street:"2626 Hudson St",city:"Baltimore, MD",type:["Bar","Pub"],comments:"Another great spot for burgers and drinks. And well, for appies and cocktails. And... anything else you may want?",url:"http://www.hudsonstreetstackhouse.com",location:{lat:39.282294,lng:-76.578838},index:13},{name:"Kooper's Tavern",street:"1702 Thames St",city:"Baltimore, MD",type:["Pub","Bar"],comments:"Great food and drinks. You can't beat the location being right in the water in Fell's Point.",url:"http://www.kooperstavern.com",location:{lat:39.282027,lng:-76.592431},index:14},{name:"The Abbey Burger Bistro",street:"811 S Broadway",city:"Baltimore, MD",type:["Pub","Bar","Burgers"],comments:"This is a burger place where you can order an incredible burger right off the menu OR build your own! They always have interesting meat selections, or if you prefer, they have great vegetarian burger options too!",url:"http://www.abbeyburgerbistro.com",location:{lat:39.282204,lng:-76.592697},index:15},{name:"Shiso Tavern",street:"2933 O'Donnell St",city:"Baltimore, MD",type:["Sushi","Asian","Noodles"],comments:"The sushi's not bad... the prices are good. I prefer the bowls and appies over the actual sushi rolls here.",url:"http://www.shisotavern.com",location:{lat:39.279923,lng:-76.574212},index:16},{name:"Jasa Kabob",street:"2917 O'Donnell St",city:"Baltimore, MD",type:["Asian","Indian"],comments:"If you are craving curry, here is the place! This little restaurant looks small from the outside, but has huge flavor! Plus delicious ice cream if you have room for it after your meal.",url:"http://www.jasakabob.com",location:{lat:39.279906,lng:-76.574872},index:17},{name:"Saigon Today",street:"700 S Potomac St",city:"Baltimore, MD",type:["Asian","Noodles"],comments:"This place is the bomb, pho realz, if you're craving a hot belly of soup! The service is great, fast, and the food is tasty!",url:"http://www.saigontodaybmore.com",location:{lat:39.284189,lng:-76.574399},index:18},{name:"Blue Moon Cafe",street:"1621 Aliceanna St",city:"Baltimore, MD",type:["Breakfast","American"],comments:"This is once of Baltimore's more famous breakfast place. Be prepared to arrive early on the weekends if you want a spot. Their breakfast burritos are amazing, or try their famous captain crunch french toast!",url:"http://www.bluemoonbaltimore.com",location:{lat:39.283394,lng:-76.594241},index:19},{name:"Iron Rooster",street:"3721 Boston St",city:"Baltimore, MD",type:["Southern","Breakfast","American"],comments:"Come hungry! Servings a big, and full of southern flavor. I have never had a bad meal here, and I've had many!",url:"http://www.ironroosterallday.com",location:{lat:39.276453,lng:-76.565328},index:20}]},Restaurant=function(a){this.name=ko.observable(a.name),this.street=ko.observable(a.street),this.city=ko.observable(a.city),this.type=ko.observableArray(a.type),this.comments=ko.observable(a.comments),this.url=ko.observable(a.url),this.location=ko.observable(a.location),this.index=a.index},ViewModel=function(){var a=this;this.restaurantList=ko.observableArray([]),this.filter=ko.observable(""),model.restaurants.forEach(function(b){a.restaurantList.push(new Restaurant(b))}),this.filteredList=ko.computed(function(){var c=this.filter().toLowerCase();return c?ko.utils.arrayFilter(a.restaurantList(),function(a){return b(a.name().toLowerCase(),c)}):a.restaurantList()},a),this.currentRestaurant=ko.observable(this.filteredList[0]),this.setRestaurant=function(b){$(".intro").remove(),a.currentRestaurant(b),requestFourSquare(b.location()),toggleBounce(markersArray[b.index])};var b=function(a,b){return a=a||"",!(b.length>a.length)&&a.substring(0,b.length)===b}};openNav(),ko.applyBindings(new ViewModel);